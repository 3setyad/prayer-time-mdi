<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masjid Da'watul Islam Yogyakarta</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            padding: 20px;
            box-sizing: border-box;
            transition: all 0.5s ease;
        }

        .container {
            text-align: center;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 600px;
            transition: all 0.5s ease;
        }

        h1 {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 2.5rem;
            color: #4CAF50;
        }

        .clock {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .date {
            font-size: 1.5rem;
            opacity: 0.8;
            margin-bottom: 30px;
        }

        .prayer-times {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        .prayer-time {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .prayer-time.active {
            background: rgba(76, 175, 80, 0.7);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);
        }

        .prayer-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .prayer-hour {
            font-size: 1.5rem;
        }

        .iqamah-countdown {
            display: none;
            font-size: 2.5rem;
            margin: 20px 0;
            color: #FFC107;
            font-weight: bold;
        }

        .iqamah-notification {
            display: none;
            background-color: rgba(76, 175, 80, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Light Theme */
        body.light-theme {
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            color: #333;
        }

        body.light-theme .container {
            background-color: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            color: #333;
        }

        body.light-theme .theme-toggle {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
        }

        body.light-theme .prayer-time {
            background: rgba(0, 0, 0, 0.05);
            color: #333;
        }

        body.light-theme h1 {
            color: #2E7D32;
        }

        body.light-theme .prayer-time.active {
            background: rgba(46, 125, 50, 0.7);
            box-shadow: 0 0 15px rgba(46, 125, 50, 0.5);
        }

        @media (max-width: 600px) {
            .prayer-times {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .clock {
                font-size: 3rem;
            }
        }

        @media (max-width: 400px) {
            .prayer-times {
                grid-template-columns: 1fr;
            }
        }

        /* Mode Iqamah */
        body.iqamah-mode {
            background: linear-gradient(135deg, #1a237e, #0d47a1);
            animation: iqamahBackground 10s infinite alternate;
        }

        @keyframes iqamahBackground {
            0% { background: linear-gradient(135deg, #1a237e, #0d47a1); }
            100% { background: linear-gradient(135deg, #0d47a1, #1a237e); }
        }

        body.iqamah-mode .container {
            background-color: rgba(0, 0, 0, 0.5);
        }

        body.light-theme.iqamah-mode {
            background: linear-gradient(135deg, #1565C0, #0D47A1);
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">Toggle Tema</button>
    
    <div class="container">
        <h1>Masjid Da'watul Islam Yogyakarta</h1>
        <div class="clock">
            <span id="hours">00</span>:
            <span id="minutes">00</span>:
            <span id="seconds">00</span>
        </div>
        <div class="date">
            <span id="day">Senin</span>,
            <span id="month">Januari</span>
            <span id="daynum">1</span>,
            <span id="year">2023</span>
        </div>
        
        <div class="iqamah-countdown" id="iqamahCountdown">
            Menuju Iqamah: <span id="countdown">15:00</span>
        </div>
        
        <div class="iqamah-notification" id="iqamahNotification">
            Waktu Sholat Telah Tiba! Bersiap untuk Iqamah dalam 15 menit
        </div>
        
        <h2>Waktu Sholat</h2>
        <div class="prayer-times" id="prayerTimes">
            <!-- Waktu sholat akan diisi oleh JavaScript -->
        </div>
    </div>

    <script>
        // Data waktu sholat untuk Yogyakarta (contoh - bisa disesuaikan)
        const prayerTimes = {
            "Shubuh": "04:25",
            "Dzuhur": "11:45",
            "Ashar": "15:05",
            "Maghrib": "17:45",
            "Isya": "19:00"
        };

        // Waktu iqamah (contoh - 15 menit setelah adzan)
        const iqamahTimes = {
            "Shubuh": "04:40",
            "Dzuhur": "12:00",
            "Ashar": "15:20",
            "Maghrib": "17:50",
            "Isya": "19:15"
        };

        // Variabel global
        let currentActivePrayer = null;
        let countdownInterval = null;

        function updateClock() {
            const now = new Date();
            
            // Waktu dalam format 24 jam
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const currentTime24 = `${hours}:${minutes}`;
            const currentDateTime = now.getTime();
            
            // Tanggal
            const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
            
            const day = days[now.getDay()];
            const month = months[now.getMonth()];
            const daynum = now.getDate();
            const year = now.getFullYear();
            
            // Update elemen HTML
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
            
            document.getElementById('day').textContent = day;
            document.getElementById('month').textContent = month;
            document.getElementById('daynum').textContent = daynum;
            document.getElementById('year').textContent = year;
            
            // Update status waktu sholat aktif dan cek iqamah
            checkPrayerTime(currentTime24, currentDateTime);
            
            // Update setiap detik
            setTimeout(updateClock, 1000);
        }

        function renderPrayerTimes() {
            const prayerTimesContainer = document.getElementById('prayerTimes');
            prayerTimesContainer.innerHTML = '';
            
            for (const [prayerName, prayerTime] of Object.entries(prayerTimes)) {
                const iqamahTime = iqamahTimes[prayerName] || '-';
                
                const prayerElement = document.createElement('div');
                prayerElement.className = 'prayer-time';
                prayerElement.id = `prayer-${prayerName.toLowerCase()}`;
                prayerElement.innerHTML = `
                    <div class="prayer-name">${prayerName}</div>
                    <div class="prayer-hour">${prayerTime}</div>
                    <small>Iqamah: ${iqamahTime}</small>
                `;
                prayerTimesContainer.appendChild(prayerElement);
            }
        }

        function checkPrayerTime(currentTime24, currentDateTime) {
            // Cek apakah sekarang masuk waktu sholat
            let activePrayer = null;
            const prayers = Object.entries(prayerTimes);
            
            for (let i = 0; i < prayers.length; i++) {
                const [prayerName, prayerTime] = prayers[i];
                const nextPrayerTime = i < prayers.length - 1 ? prayers[i+1][1] : prayerTimes["Shubuh"];
                
                if (currentTime24 >= prayerTime && currentTime24 < nextPrayerTime) {
                    activePrayer = prayerName;
                    break;
                }
            }
            
            // Jika tidak ada waktu sholat yang aktif (antara Isya dan Shubuh)
            if (!activePrayer && (currentTime24 >= prayerTimes["Isya"] || currentTime24 < prayerTimes["Shubuh"])) {
                activePrayer = "Isya";
            }
            
            // Jika ada perubahan waktu sholat aktif
            if (activePrayer !== currentActivePrayer) {
                currentActivePrayer = activePrayer;
                updateActivePrayerDisplay(activePrayer);
                
                // Reset countdown jika ada
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                    countdownInterval = null;
                }
                
                // Sembunyikan notifikasi iqamah
                document.getElementById('iqamahCountdown').style.display = 'none';
                document.getElementById('iqamahNotification').style.display = 'none';
                document.body.classList.remove('iqamah-mode');
                
                // Jika masuk waktu sholat, mulai countdown iqamah
                if (activePrayer) {
                    const iqamahTime = iqamahTimes[activePrayer];
                    if (iqamahTime) {
                        startIqamahCountdown(activePrayer, iqamahTime, currentDateTime);
                    }
                }
            }
            
            // Update tampilan aktif
            updateActivePrayerDisplay(activePrayer);
        }

        function updateActivePrayerDisplay(activePrayer) {
            // Reset semua status aktif
            document.querySelectorAll('.prayer-time').forEach(el => {
                el.classList.remove('active');
            });
            
            if (activePrayer) {
                const activeElement = document.getElementById(`prayer-${activePrayer.toLowerCase()}`);
                if (activeElement) {
                    activeElement.classList.add('active');
                }
            }
        }

        function startIqamahCountdown(prayerName, iqamahTime, currentDateTime) {
            // Parse waktu iqamah
            const [iqamahHours, iqamahMinutes] = iqamahTime.split(':').map(Number);
            const iqamahDate = new Date();
            iqamahDate.setHours(iqamahHours, iqamahMinutes, 0, 0);
            
            // Jika iqamah sudah lewat hari ini, set untuk besok
            if (iqamahDate.getTime() < currentDateTime) {
                iqamahDate.setDate(iqamahDate.getDate() + 1);
            }
            
            const iqamahDateTime = iqamahDate.getTime();
            
            // Hitung selisih waktu
            const timeDiff = iqamahDateTime - currentDateTime;
            
            // Jika waktu sholat sudah masuk tapi belum iqamah
            if (timeDiff > 0 && timeDiff <= 15 * 60 * 1000) {
                showIqamahCountdown(timeDiff);
            }
        }

        function showIqamahCountdown(timeDiff) {
            document.body.classList.add('iqamah-mode');
            document.getElementById('iqamahNotification').style.display = 'block';
            
            // Tampilkan countdown
            const countdownElement = document.getElementById('iqamahCountdown');
            countdownElement.style.display = 'block';
            
            // Update countdown setiap detik
            updateCountdownDisplay(timeDiff);
            
            countdownInterval = setInterval(() => {
                timeDiff -= 1000;
                if (timeDiff <= 0) {
                    clearInterval(countdownInterval);
                    countdownElement.textContent = "Iqamah telah tiba!";
                    return;
                }
                updateCountdownDisplay(timeDiff);
            }, 1000);
        }

        function updateCountdownDisplay(timeDiff) {
            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
            
            document.getElementById('countdown').textContent = 
                `${Math.floor(minutes).toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            
            // Simpan preferensi tema di localStorage
            const isLight = document.body.classList.contains('light-theme');
            localStorage.setItem('lightTheme', isLight);
        }

        function checkSavedTheme() {
            const savedTheme = localStorage.getItem('lightTheme');
            if (savedTheme === 'true') {
                document.body.classList.add('light-theme');
            }
        }

        // Inisialisasi saat halaman dimuat
        window.onload = function() {
            checkSavedTheme();
            renderPrayerTimes();
            updateClock();
        };
    </script>
</body>
</html>
